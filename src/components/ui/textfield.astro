---
import type { HTMLAttributes } from "astro/types"

interface Props extends HTMLAttributes<"input"> {
  multiline?: boolean
}

const { class: className, multiline = false, ...props } = Astro.props
---

{
  multiline ? (
    <textarea class:list={["this-textfield", "this-textarea", className]} {...props} />
  ) : (
    <input class:list={["this-textfield", className]} {...props} />
  )
}

<style>
  .this-textfield {
    display: flex;
    inline-size: 100%;
    min-block-size: 40px;
    padding: 8px 12px;
    font-size: 14px;
    border: 1px solid var(--color-stroke);
    border-radius: 8px;
    background-color: var(--color-background);
    transition:
      border-color var(--theme-transition-duration),
      box-shadow var(--theme-transition-duration);
  }

  .this-textarea {
    min-block-size: calc(34px + 6lh);
    max-block-size: calc(34px + 15lh);
    resize: vertical;
    field-sizing: content;
  }

  .this-textfield::placeholder {
    color: var(--color-text-secondary);
  }

  .this-textfield:focus-visible {
    outline: none;
    border-color: hsl(0 0% 55%);
    box-shadow: 0 0 0 2px hsl(0 0% 0% / 0.2);
  }

  html[data-theme="dark"] .this-textfield:focus-visible {
    border-color: hsl(0 0% 64%);
    box-shadow: 0 0 0 2px hsl(0 0% 27%);
  }

  .this-textfield:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }
</style>
